# 4. 디지털 및 아날로그 입출력

날짜: 2025년 3월 19일
학습 상태: 완료
복습 필요: Yes

# 📌 **아두이노 함수 요약 및 PWM 개념**

### **주요 함수 설명**

| 함수 | 설명 |
| --- | --- |
| `digitalRead(핀번호)` | 지정한 디지털 핀에서 HIGH(1) 또는 LOW(0) 신호를 읽음 |
| `digitalWrite(핀번호, HIGH or LOW)` | 지정한 디지털 핀에 HIGH(1) 또는 LOW(0) 신호를 출력 |
| `analogRead(핀번호)` | 지정한 아날로그 핀(A0~~A5)에서 0~~1023의 값을 읽음 |
| `analogWrite(핀번호, 값)` | 지정한 아날로그 핀에 0(꺼짐)~255(켜짐)의 값을 출력 (PWM 제어) |

---

### **PWM(Pulse Width Modulation) 개념**

- **PWM이란:** 디지털 신호의 펄스 폭을 조절하여 아날로그 출력처럼 동작하게 하는 기법
- **Duty Cycle:** HIGH 상태의 비율을 나타내며, 보통 %로 표현함.
    - 0% Duty Cycle = `analogWrite(0)` (항상 꺼짐)
    - 25% Duty Cycle = `analogWrite(64)`
    - 50% Duty Cycle = `analogWrite(127)` (절반만 켜짐)
    - 75% Duty Cycle = `analogWrite(191)`
    - 100% Duty Cycle = `analogWrite(255)` (항상 켜짐)
- **활용 예시:** LED 밝기 조절, 모터 속도 제어 등

![image.png](4%20%E1%84%83%E1%85%B5%E1%84%8C%E1%85%B5%E1%84%90%E1%85%A5%E1%86%AF%20%E1%84%86%E1%85%B5%E1%86%BE%20%E1%84%8B%E1%85%A1%E1%84%82%E1%85%A1%E1%86%AF%E1%84%85%E1%85%A9%E1%84%80%E1%85%B3%20%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%8E%E1%85%AE%E1%86%AF%E1%84%85%E1%85%A7%E1%86%A8%201b8c51a948fd80bea556f73af75cbf97/image.png)

---

### **입출력 핀 요약**

|  | 입력 (INPUT) | 출력 (OUTPUT) | 핀 번호 |
| --- | --- | --- | --- |
| **디지털(Digital)** | O | O | 0 ~ 13 (14개) |
| **아날로그(Analog)** | O | X | A0 ~ A5 (6개) |

---

## 💡 **LED 깜빡이기 요약**

### **LED란?**

- **Light Emitting Diode**의 약자: 빛을 방출하는 다이오드
- 전기가 흐르면 빛이 나며, 전류의 흐름에 따라 켜지거나 꺼짐
- **구성요소:**
    - 긴 단자: **애노드(Anode, + 전극)**
    - 짧은 단자: **캐소드(Cathode, - 전극)**
- **작동 조건:** 약 **2V**의 전압이 필요하며, 전류 제한을 위해 저항을 함께 연결해야 함

---

### **저항의 역할 및 계산**

- LED가 손상되지 않도록 전류 제한용 저항을 사용함
- **저항 계산 공식:**

$$
R = \frac{V}{I}]
$$

- RRR: 저항(Ω, 옴)
- VVV: 전압(V)
- III: 전류(A)

**예시:**

- LED의 동작 전압이 2V, 아두이노의 출력 전압이 5V, LED의 적정 전류가 20mA(0.02A)일 경우

$$
R = \frac{5V - 2V}{0.02A} = \frac{3V}{0.02A} = 150Ω]
$$

## 🌈 **RGB 요약**

### **RGB LED란?**

- **Red, Green, Blue** 세 가지 색상의 LED가 하나의 패키지에 포함된 형태로, 다양한 색상을 표현할 수 있음.
- 각 색상의 밝기를 조절하여 약 **1,677만 가지**의 색상을 생성 가능.
- **핀 구성:**
    - 각 색상의 핀(R, G, B)과 공통 핀(Common Anode 또는 Common Cathode)으로 구성됨.
    - 공통 핀에 연결된 극성에 따라 **애노드(+)** 또는 **캐소드(-)**로 설정.

![image.png](4%20%E1%84%83%E1%85%B5%E1%84%8C%E1%85%B5%E1%84%90%E1%85%A5%E1%86%AF%20%E1%84%86%E1%85%B5%E1%86%BE%20%E1%84%8B%E1%85%A1%E1%84%82%E1%85%A1%E1%86%AF%E1%84%85%E1%85%A9%E1%84%80%E1%85%B3%20%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%8E%E1%85%AE%E1%86%AF%E1%84%85%E1%85%A7%E1%86%A8%201b8c51a948fd80bea556f73af75cbf97/image%201.png)

---

### **RGB 가산 혼합**

- RGB LED는 **4가지 기본 색상**만 나타내는 것이 아니라, **색상 조합**을 통해 **거의 모든 색상**을 표현할 수 있음.
- 두 개 또는 세 개의 색이 동시에 켜져 있어도, **우리 눈은 하나의 색**으로 인식함.
- 가산 혼합의 원리로 **빨강 + 초록 = 노랑**, **빨강 + 파랑 = 자홍**, **초록 + 파랑 = 청록** 같은 색상 표현이 가능.
- **빨강 + 초록 + 파랑 = 흰색**으로 표현됨.

---

### **색상 표현 방법**

1. **디지털 방식:**
    - `digitalWrite()` 함수로 HIGH(1) 또는 LOW(0)만 출력 → **7가지 색상** 표현 가능
    - 가능한 조합: 빨강, 초록, 파랑, 노랑, 청록, 자홍, 흰색
2. **아날로그 방식(PWM 사용):**
    - `analogWrite()` 함수로 0~255의 값을 출력하여 각 색상의 밝기 조절
    - 최대 색상 수: 256(빨강) × 256(초록) × 256(파랑) = **16,777,216가지 색상**
    - PWM을 통해 부드럽고 다양한 색상 전환이 가능함.

---

### Common Cathode & Common Anode

![image.png](4%20%E1%84%83%E1%85%B5%E1%84%8C%E1%85%B5%E1%84%90%E1%85%A5%E1%86%AF%20%E1%84%86%E1%85%B5%E1%86%BE%20%E1%84%8B%E1%85%A1%E1%84%82%E1%85%A1%E1%86%AF%E1%84%85%E1%85%A9%E1%84%80%E1%85%B3%20%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%8E%E1%85%AE%E1%86%AF%E1%84%85%E1%85%A7%E1%86%A8%201b8c51a948fd80bea556f73af75cbf97/image%202.png)

- **Common Cathode(-) 타입:**
    - 왼쪽에 표시된 회로도로, 공통 핀이 음극(-)에 연결됨
    - R, G, B 핀에 각각 양극(+)을 연결하여 제어
- **Common Anode(+) 타입:**
    - 오른쪽에 표시된 회로도로, 공통 핀이 양극(+)에 연결됨
    - R, G, B 핀에 각각 음극(-)을 연결하여 제어

---

### **PWM의 활용**

- LED의 밝기와 색상 조절에 사용
- 예시) `analogWrite(R, 128);` → 빨간색의 밝기를 50%로 설정
- 다양한 색상의 혼합을 통해 자유롭게 색상 표현 가능

---

## 🔵 **시리얼 통신(Serial Communication)**

- **Serial(직렬)**: 데이터를 **연속적**으로 **1비트씩** 전송하는 방식
- exit status 1한 번에 하나의 비트만 전송하므로 단순하지만 신뢰성이 높음
- 아두이노에서 시리얼 통신은 기본적으로 **TX(송신)**와 **RX(수신)** 핀을 통해 이루어짐
- USB 연결을 통해 PC와 아두이노 간 데이터 전송에 사용됨

---

## 💻 **시리얼 모니터(Serial Monitor)**

- 아두이노 IDE에서 **시리얼 데이터를 주고받는 인터페이스**
- 아두이노의 데이터를 실시간으로 확인하거나 명령을 입력할 수 있음
- **도구 → 시리얼 모니터**에서 실행 가능
- 통신 속도(baud rate)는 코드와 동일하게 설정해야 함 (예: 9600bps)

---

## 📂 **시리얼 통신 함수 정리**

| 함수 | 설명 |
| --- | --- |
| **Serial.begin(baud rate)** | 시리얼 통신을 시작하고 통신 속도를 설정 (보통 9600bps) |
| **Serial.print(data)** | 데이터를 시리얼 모니터에 출력 (줄 바꿈 없음) |
| **Serial.println(data)** | 데이터를 출력하고 줄 바꿈 (\n) |
| **Serial.available()** | 읽을 수 있는 데이터의 바이트 수 반환 (최대 64바이트 버퍼) |
| **Serial.read()** | 수신된 데이터를 1바이트 읽고 반환 |
| **Serial.end()** | 시리얼 통신을 종료 |